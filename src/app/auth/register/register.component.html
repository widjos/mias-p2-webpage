<!-- register.component.html -->

<div class="container">
  <div class="row">
    <div class="col-md-5">
      <h1 class="page-title">User Registration</h1>
      <form #registerForm="ngForm">
        <div class="form-group">
          <div *ngIf="errors.length > 0" class="alert alert-danger">
          <ul *ngFor = "let error of errors">
              <li>{{ error }}</li>
          </ul>
          </div>

          
          <label for="name">Username</label>
         <input type="text"
                 class="form-control"
                 [(ngModel)] = "formData.name"
                 name="name"
                 #name = "ngModel"
                 required>
        </div>
        <div *ngIf="name.invalid && (name.dirty || name.touched)"
          class="alert alert-danger">
          <div *ngIf="name.errors.required">
            Username is required
          </div>
        </div>


        <div class="form-group">
          <div *ngIf="errors.length > 0" class="alert alert-danger">
          <ul *ngFor = "let error of errors">
              <li>{{ error }}</li>
          </ul>
          </div>

          
          <label for="lastname">lastname</label>
         <input type="text"
                 class="form-control"
                 [(ngModel)] = "formData.lastname"
                 name="lastname"
                 #lastname = "ngModel"
                 required>
        </div>
        <div *ngIf="lastname.invalid && (lastname.dirty || lastname.touched)"
          class="alert alert-danger">
          <div *ngIf="lastname.errors.required">
            Last name  is required
          </div>
        </div>


   
          

        
        <div class="form-group">
          <label  for="email">Email</label>
          <input type="email"
                 class="form-control"
                 [(ngModel)] = "formData.mail"
                 name="mail"
                 #mail = "ngModel"
                 required>
        </div>
        <div *ngIf="mail.invalid && (mail.dirty || mail.touched)"
          class="alert alert-danger">
          <div *ngIf="mail.errors.required">
            Email is required
          </div>
        </div>

        <div class="form-group">
          <label for="codeMail">Code Confirmation</label>
          <input type="text"
                 class="form-control"
                 [(ngModel)] = "formData.codeMail"
                 name="codeMail"
                 #codeMail = "ngModel"
                 required>
                 <button 
                 
                  name ="sendCode"
                  (click) = "sendCodeVerification(formData.mail)" 
                  class="btn btn-primary"
                  >Enviar Codigo </button>

                  


        </div>
        

        <div *ngIf="codeMail.invalid && (codeMail.dirty || codeMail.touched)"
          class="alert alert-danger">
          <div *ngIf="codeMail.errors.required">
            Codigo de confirmacion necesario
          </div>
        </div>
        <div *ngIf="this.sendedCode === true  " class="alert alert-info" role="alert">
         
            Su codigo de verificacion a sido enviado a su correo 
            
        </div>


        <div class="form-group">
          <div *ngIf="errors.length > 0" class="alert alert-danger">
          <ul *ngFor = "let error of errors">
              <li>{{ error }}</li>
          </ul>
          </div>

          
          <label for="birth">Birthday</label>
         <input type="text"
                 class="form-control"
                 [(ngModel)] = "formData.birth"
                 name="birth"
                 #birth = "ngModel"
                 required>
        </div>
        <div *ngIf="birth.invalid && (birth.dirty || birth.touched)"
          class="alert alert-danger">
          <div *ngIf="birth.errors.required">
            Fecha de nacimiento necesaria 
          </div>
        </div>


        <div class="form-group">
          <label for="pais">Pais</label>
          <select class="form-control form-control-sm"
          [(ngModel)] = "formData.country"
          #country = ngModel
          name="country.World">
            <option 
              *ngFor="let country of countries"  
               >{{country.World}} </option>
          </select>
        </div>


        <div class="form-group">
          <label for="pass">Password</label>
          <input type="password"
                 class="form-control"
                 [(ngModel)] = "formData.pass"
                 #pass = "ngModel"
                 name="pass"
                 required>
        </div>
        <div *ngIf="pass.invalid && (pass.dirty || pass.touched)"
          class="alert alert-danger">
          <div *ngIf="pass.errors.required">
            Password is required
          </div>
        </div>



        <div class="form-group">
          <label for="passwordConfirmation">Confirm Password</label>
          <input type="password"
                 class="form-control"
                 [(ngModel)] = "formData.passwordConfirmation"
                 #passwordConfirmation = "ngModel"
                 name="passwordConfirmation"
                 required>
        </div>
         <div *ngIf="passwordConfirmation.invalid && (passwordConfirmation.dirty || passwordConfirmation.touched)"
          class="alert alert-danger">
          <div *ngIf="passwordConfirmation.errors.required">
            Confirm Password is required
          </div>
        </div>

        <div class="form-group mt-3">
          <label class="mr-2">Upload Profile Piture</label>
          <input class="form-control" type="file" name="pic">
        </div>

        <button 
        (click) = "register()"
        type="submit" 
        class="btn btn-warning"
        [disabled] = "!registerForm.form.valid">Register</button>

        <div *ngIf=" this.sendedCode === true && formData.codeMail != this.verificationCode" class="alert alert-danger" role="alert">
            El codigo de confirmacion que ingreso no es valido , puede revisar su Email o enviar de nuevo el codigo.
        </div>

      </form>
    </div>







</div>

